@using WFPXML.Model

<DataGrid TItem="NetEventClassifyDrop"
          Data="@NetEvents"
          DetailRowStartsVisible="false"
          Filterable="true"
          FilterMode="DataGridFilterMode.Menu"
          Narrow="true"
          ShowPager="true"
          ShowPageSizes="true"
          @bind-PageSize="@pageSize"
          PageSizes="@(new int[]{50,100,200,300,400,500,1000,5000})"
          Groupable="true"
          ShowGrouping="true" 
          Bordered="true"
          Resizable="true"
          ResizeMode="TableResizeMode.Columns"
          Style="font-size:small">
    <DataGridColumns>
        <DataGridColumn Field="@nameof(NetEventClassifyDrop.TimeStamp)" DisplayFormat="{0:yyyy-MM-dd-HH-mm-ss.fff}" Caption="TimeStamp" Sortable="true" />
        <DataGridColumn Field="@nameof(NetEventClassifyDrop.FilterId)" Caption="Filter ID" Sortable="false" Groupable="true" />
        <DataGridColumn Field="@nameof(NetEventClassifyDrop.IPProtocol)" Caption="IP Protocol" Sortable="false" Groupable="true" />
        <DataGridColumn Field="@nameof(NetEventClassifyDrop.Direction)" Caption="Direction" Sortable="false" Groupable="true" />
        <DataGridColumn Field="@nameof(NetEventClassifyDrop.LocalAddress)" Caption="Local Address" Sortable="false" Groupable="true" />
        <DataGridColumn Field="@nameof(NetEventClassifyDrop.LocalPort)" Caption="Local Port" Sortable="false" Groupable="true" />
        <DataGridColumn Field="@nameof(NetEventClassifyDrop.RemoteAddress)" Caption="Remote Address" Sortable="false" Groupable="true" Grouping="true"/>
        <DataGridColumn Field="@nameof(NetEventClassifyDrop.RemotePort)" Caption="Remote Port" Sortable="false" Groupable="true" />
    </DataGridColumns>
    <DetailRowTemplate>
        @{
            <Field Horizontal>
                <FieldLabel ColumnSize="ColumnSize.Is2">App ID</FieldLabel>
                <FieldBody ColumnSize="ColumnSize.Is10">
                    <TextEdit Text="@context.AppId" Disabled Size="Size.Small" />
                </FieldBody>
            </Field>
            <Field Horizontal>
                <FieldLabel ColumnSize="ColumnSize.Is2">User ID</FieldLabel>
                <FieldBody ColumnSize="ColumnSize.Is10">
                    <TextEdit Text="@context.UserId" Disabled Size="Size.Small" />
                </FieldBody>
            </Field>
            <Field Horizontal>
                <FieldLabel ColumnSize="ColumnSize.Is2">Package SID</FieldLabel>
                <FieldBody ColumnSize="ColumnSize.Is10">
                    <TextEdit Text="@context.PackageSid" Disabled Size="Size.Small" />
                </FieldBody>
            </Field>
            <Field Horizontal>
                <FieldLabel ColumnSize="ColumnSize.Is2">Current Profile</FieldLabel>
                <FieldBody ColumnSize="ColumnSize.Is10">
                    <TextEdit Text="@context.CurrentProfile" Disabled Size="Size.Small" />
                </FieldBody>
            </Field>
            <Field Horizontal>
                <FieldLabel ColumnSize="ColumnSize.Is2">Original Profile</FieldLabel>
                <FieldBody ColumnSize="ColumnSize.Is10">
                    <TextEdit Text="@context.OriginalProfile" Disabled Size="Size.Small" />
                </FieldBody>
            </Field>
            <Field Horizontal>
                <FieldLabel ColumnSize="ColumnSize.Is2">Flags</FieldLabel>
                <FieldBody ColumnSize="ColumnSize.Is10">
                    <MemoEdit Text="@string.Join(Environment.NewLine, context.Flags)" Disabled AutoSize Size="Size.Small" />
                </FieldBody>
            </Field>
        }
    </DetailRowTemplate>
    <TotalItemsTemplate><Badge Color="Color.Primary">@context.TotalItems total items</Badge></TotalItemsTemplate>
    <TotalItemsShortTemplate><Badge Color="Color.Primary">@context.TotalItems</Badge></TotalItemsShortTemplate>
</DataGrid>

@code {
    [Parameter]
    public IEnumerable<NetEventClassifyDrop> NetEvents { get; set; } = Array.Empty<NetEventClassifyDrop>();

    int pageSize = 200;
}
